{"version":3,"sources":["../../server/next-server.ts"],"names":["Route","CacheFs","fs","join","relative","PAGES_MANIFEST","BUILD_ID_FILE","PagesManifest","recursiveReadDirSync","route","BaseServer","NextNodeServer","getHasStaticDir","existsSync","dir","getPagesManifest","pagesManifestPath","serverBuildDir","require","getBuildId","buildIdFile","distDir","readFileSync","trim","err","Error","generatePublicRoutes","publicDir","publicFiles","Set","map","p","encodeURI","replace","match","name","fn","req","res","params","parsedUrl","pathParts","path","basePath","nextConfig","basePathParts","split","shift","every","part","idx","finished","splice","length","has","serveStatic","_validFilesystemPathSet","getFilesystemPaths","pathUserFilesStatic","userFilesStatic","hasStaticDir","f","userFilesPublic","nextFilesStatic","minimalMode","getCacheFilesystem","readFile","promises","writeFile","d","mkdir","recursive","stat"],"mappings":"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"}